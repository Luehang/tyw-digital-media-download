"use strict";function starRating(a){var t=[5,4.5,4,3.5,3,2.5,2,1.5,1,.5],e=null,l=null,r=null,n=null;a=Number.parseFloat(a);for(var i=0;i<t.length;i++){if(a>t[i]){n=t[i];break}if(a===t[i]){l=t[i];break}}if(l)return l;if(n){if(e=n+.5,r=n+.25,a>=r)return e;if(a<r)return n}}function htmlRating(a){for(var t=[5,4,3,2,1],e="",l="",r='<div class="rating">',n=0;n<t.length;n++)a===t[n]&&(e="checked"),a===t[n]-.5&&(l="checked"),r+="<input "+e+' type="radio" id="star'+t[n]+'" disabled />\n                    <label class = "full" for="star'+t[n]+'"></label>',r+="<input "+l+' type="radio" id="star'+(t[n]-.5)+'" disabled />\n                    <label class = "half" for="star'+(t[n]-.5)+'"></label>',e="",l="";return r+"</div>"}function getRateHTML(a){return htmlRating(starRating(a))}function getStarRating(a){return'<form class="rating" style="width: 138px;">'+(5===a?'<input checked type="radio" id="star5" name="rating" value="5" disabled />\n                <label class = "full" for="star5"></label>':'<input type="radio" id="star5" name="rating" value="5" disabled />\n                <label class = "full" for="star5"></label>')+(4===a?'<input checked type="radio" id="star4" name="rating" value="4" disabled />\n                <label class = "full" for="star4"></label>':'<input type="radio" id="star4" name="rating" value="4" disabled />\n                <label class = "full" for="star4"></label>')+(3===a?'<input checked type="radio" id="star3" name="rating" value="3" disabled />\n                <label class = "full" for="star3"></label>':'<input type="radio" id="star3" name="rating" value="3" disabled />\n                <label class = "full" for="star3"></label>')+(2===a?'<input checked type="radio" id="star2" name="rating" value="2" disabled />\n                <label class = "full" for="star2"></label>':'<input type="radio" id="star2" name="rating" value="2" disabled />\n                <label class = "full" for="star2"></label>')+(1===a?'<input checked type="radio" id="star1" name="rating" value="1" disabled />\n                <label class = "full" for="star1"></label>':'<input type="radio" id="star1" name="rating" value="1" disabled />\n                <label class = "full" for="star1"></label>')+"</form>"}function returnDateTime(a){var t=new Date(a),e=t.getHours(),l=t.getMinutes().toString(),r=t.getMonth()+1,n=t.getDate(),i=t.getFullYear();return 1===l.length&&(l="0"+l),e>=13?r+"/"+n+"/"+i+" at "+(e-=12)+":"+l+" PM":0===e?r+"/"+n+"/"+i+" at "+(e=12)+":"+l+" AM":r+"/"+n+"/"+i+" at "+e+":"+l+" AM"}function stopLoader(){$(".loader").fadeOut("slow",function(){$(".comments .inner").fadeIn("slow")})}var defaultAvatar="/img/default-avatar.svg",guestusername="",productID=$("#product-id").val(),url="/api/review-message/"+productID,allComments=[],productRatingDiv=$("#product-rating-div"),productRating=$("#product-rating").val(),productRatingHTML=getRateHTML(productRating);productRatingDiv.html(productRatingHTML),$.ajax({type:"GET",url:url,dataType:"json",contentType:"application/json",cache:!0}).done(function(a){if(a.success){allComments=a.data;var t=0;$.each(allComments,function(a,e){var l=$('<div class="comment"></div>');$('<img class="avatar" alt="avatar" src="'+defaultAvatar+'"/>').appendTo(l);var r=$('<div class="body"></div>');$('<a target="_blank">'+this.name+"</a>").appendTo(r),$("<span> • "+returnDateTime(this.created_at)+"</span><br />"+getStarRating(this.rating)+"<br />").appendTo(r),$("<p>"+this.message+"</p>").appendTo(r),r.appendTo(l),l.appendTo(".comments .inner"),t++}),t==allComments.length&&stopLoader()}a.success||stopLoader()}),setTimeout(function(){stopLoader()},1e4),$(function(){var a=null;$(".stars-container .click").click(function(){a=$(this).val(),a=Number.parseInt(a)}),$(".send-msg").click(function(){var t=$(".your-name").val(),e=$(".your-msg").val(),l=$('<div class="comment" style="display: none;"></div>'),r=$('<div class="body"></div>');$.ajax({type:"POST",url:url,data:{userId:"GUEST",name:t,rating:a,message:e},dataType:"json"});var n=returnDateTime((new Date).toISOString()),i=getStarRating(a);$(".your-msg").val(""),$(".your-name").fadeOut().remove(),$(".your-msg").before('<div class="input your-name dived">'+t+"</div>"),$('<img class="avatar" alt="avatar" src="'+defaultAvatar+'" />').appendTo(l),$('<a target="_blank">'+t+"</a>").appendTo(r),$("<span> • "+n+"</span><br />"+i+"<br />").appendTo(r),$("<p>"+e+"</p>").appendTo(r),r.appendTo(l),$(".add-new").after(l),l.fadeIn("slow")})});