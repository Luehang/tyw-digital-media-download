"use strict";function showTab(e){var a=document.getElementsByClassName("tab");a[e].style.display="block",0==e?(document.getElementById("prevBtn").style.display="none",document.getElementById("nextBtn").style.display="block"):document.getElementById("prevBtn").style.display="block",e==a.length-1&&(document.getElementById("nextBtn").style.display="none"),fixStepIndicator(e)}function nextPrev(e){var a=document.getElementsByClassName("tab");if(1==e&&!validateForm())return!1;a[currentTab].style.display="none",showTab(currentTab+=e)}function validateEmail(e){return/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e.toLowerCase())}function validateForm(){var e=document.getElementById("name").value,a=document.getElementById("email").value,t=[],r="";return""===e&&t.push("Name field needs to be filled out."),!1===validateEmail(a)&&t.push("Invalid email address."),0===t.length||(t.map(function(e){r+='<p style="color: red;">* '+e+"</p>"}),$alert.html(r),$annotation.css("display","block"),!1)}function fixStepIndicator(e){var a,t=document.getElementsByClassName("step");for(a=0;a<t.length;a++)t[a].className=t[a].className.replace(" active","");t[e].className+=" active"}var $PAYPAL_SANDBOX_KEY=$("#PAYPAL_SANDBOX_KEY").val(),$PAYPAL_PRODUCTION_KEY=$("#PAYPAL_PRODUCTION_KEY").val(),$STRIPE_PUB_KEY=$("#STRIPE_PUB_KEY").val(),$APP_URL=$("#APP_URL").val();Stripe.setPublishableKey($STRIPE_PUB_KEY);var $number=$("#card-number"),$numberRow=$("#card-number-row"),$cvc=$("#card-cvc"),$cvcRow=$("#card-cvc-row"),$expMonth=$("#card-expiry-month"),$expMonthRow=$("#card-expiry-month-row"),$expYear=$("#card-expiry-year"),$expYearRow=$("#card-expiry-year-row"),$cardName=$("#card-name"),$form=$("#checkout-form"),$annotation=$("#front-annotation"),$alert=$("#alert"),$priceTag=$("#price-tag").html(),currentTab=0;showTab(currentTab);var CREATE_PAYMENT_URL=$APP_URL+"/paypal/create-payment",EXECUTE_PAYMENT_URL=$APP_URL+"/paypal/execute-payment";paypal.Button.render({env:"sandbox",client:{sandbox:$PAYPAL_SANDBOX_KEY,production:$PAYPAL_PRODUCTION_KEY},commit:!0,style:{label:"paypal",size:"responsive",shape:"rect",color:"gold",tagline:!1},payment:function(e,a){return a.payment.create({payment:{transactions:[{amount:{total:$priceTag,currency:"USD"}}]}})},onAuthorize:function(e,a){return a.payment.execute().then(function(){$form.submit()})},onError:function(e){$alert.html('<p style="color: red;">* '+e+"</p>"),$annotation.css("display","block")}},"#paypal-button"),$(document).ready(function(){function e(e,a){if(a.error)$alert.html('<p style="color: red;">* '+a.error.message+"</p>"),$annotation.css("display","block"),$form.find("#submit-button").prop("disabled",!1);else{var t=a.id;$form.append($('<input type="hidden" name="stripeToken" />').val(t)),$form.get(0).submit()}}$form.find("#submit-button").prop("disabled",!0);setInterval(function(){""!==$number.val()&&(Stripe.card.validateCardNumber($number.val())?($number.css("background-color","white"),$numberRow.css("background-color","white")):($number.css("background-color","#EF3838"),$numberRow.css("background-color","#EF3838"))),""!==$expMonth.val()&&""!==$expYear.val()&&(Stripe.card.validateExpiry($expMonth.val(),$expYear.val())?($expMonth.css("background-color","white"),$expMonthRow.css("background-color","white"),$expYear.css("background-color","white"),$expYearRow.css("background-color","white")):($expMonth.css("background-color","#EF3838"),$expMonthRow.css("background-color","#EF3838"),$expYear.css("background-color","#EF3838"),$expYearRow.css("background-color","#EF3838"))),""!==$cvc.val()&&(Stripe.card.validateCVC($cvc.val())?($cvc.css("background-color","white"),$cvcRow.css("background-color","white")):($cvc.css("background-color","#EF3838"),$cvcRow.css("background-color","#EF3838"))),Stripe.card.validateCardNumber($number.val())&&Stripe.card.validateExpiry($expMonth.val(),$expYear.val())&&Stripe.card.validateCVC($cvc.val())&&""!==$cardName.val()&&$form.find("#submit-button").prop("disabled",!1)},100);$form.find(".submit-button").click(function(){$form.submit()}),$form.submit(function(a){return $annotation.css("display","none"),$form.find("#submit-button").prop("disabled",!0),Stripe.card.createToken({number:$number.val(),cvc:$cvc.val(),exp_month:$expMonth.val(),exp_year:$expYear.val(),name:$cardName.val()},e),!1})});